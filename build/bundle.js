var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function l(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function g(t,e){t.value=null==e?"":e}function $(t,e,n){t.classList[n?"add":"remove"](e)}let x;function y(t){x=t}const k=[],v=[],w=[],b=[],E=Promise.resolve();let N=!1;function D(t){w.push(t)}let _=!1;const A=new Set;function I(){if(!_){_=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];y(e),C(e.$$)}for(y(null),k.length=0;v.length;)v.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];A.has(e)||(A.add(e),e())}w.length=0}while(k.length);for(;b.length;)b.pop()();N=!1,_=!1,A.clear()}}function C(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const S=new Set;let T;function W(){T={r:0,c:[],p:T}}function M(){T.r||o(T.c),T=T.p}function R(t,e){t&&t.i&&(S.delete(t),t.i(e))}function O(t,e,n,o){if(t&&t.o){if(S.has(t))return;S.add(t),T.c.push((()=>{S.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function U(t){t&&t.c()}function V(t,n,s){const{fragment:c,on_mount:a,on_destroy:i,after_update:l}=t.$$;c&&c.m(n,s),D((()=>{const n=a.map(e).filter(r);i?i.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(D)}function j(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(k.push(t),N||(N=!0,E.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function L(e,r,s,c,a,l,u=[-1]){const d=x;y(e);const f=r.props||{},p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let m=!1;if(p.ctx=s?s(e,f,((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&a(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),m&&z(e,t)),n})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(i)}else p.fragment&&p.fragment.c();r.intro&&R(e.$$.fragment),V(e,r.target,r.anchor),I()}y(d)}class Y{$destroy(){j(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function B(t){const e=firebase.database().ref().child(t);return{onValue:function(t){e.on("value",(e=>t(e.val())))},push:function(t,n){e.push(t,n)},node:e,deleteValue:function(){e.remove()},editValue:function(t){e.set(t)}}}const K=Object.freeze({WAITING:0,ANSWERED:1,NEED_ANSWER:2});const F=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];function G(e){let n;return{c(){n=u("div"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="197px" height="197px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><path fill="none" stroke="#e90c59" stroke-width="11" stroke-dasharray="146.25568908691406 110.33323913574219" d="M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z" stroke-linecap="round" style="transform:scale(0.8);transform-origin:50px 50px"><animate attributeName="stroke-dashoffset" repeatCount="indefinite" dur="0.819672131147541s" keyTimes="0;1" values="0;256.58892822265625"></animate></path></svg>'},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&i(n)}}}class q extends Y{constructor(t){super(),L(this,t,null,G,s,{})}}function H(e){let n,r,s,l,d,h,g,$;return{c(){n=u("h1"),n.textContent="Did you smoke Today ?",r=f(),s=u("div"),l=u("button"),l.textContent="NO",d=f(),h=u("button"),h.textContent="YES",m(l,"class","no svelte-1wotihz"),m(h,"class","yes svelte-1wotihz"),m(s,"class","svelte-1wotihz")},m(t,o){a(t,n,o),a(t,r,o),a(t,s,o),c(s,l),c(s,d),c(s,h),g||($=[p(l,"click",e[0](!1)),p(h,"click",e[0](!0))],g=!0)},p:t,i:t,o:t,d(t){t&&i(n),t&&i(r),t&&i(s),g=!1,o($)}}}function J(t,e,n){let{todayId:o}=e;const{editValue:r}=B(`/smoke-2020/${o}`);return t.$$set=t=>{"todayId"in t&&n(1,o=t.todayId)},[t=>()=>{r(t)},o]}class P extends Y{constructor(t){super(),L(this,t,J,H,s,{todayId:1})}}function Q(t,e,n){const o=t.slice();return o[2]=e[n],o[4]=n,o}function X(t,e,n){const o=t.slice();return o[5]=e[n],o}function Z(t){let e,n,o,r,s,l,p,g=F[t[5].date.getDay()]+"",x=t[5].smoked?"OUI":"NON";return{c(){e=u("div"),n=u("div"),o=u("p"),r=d(g),s=f(),l=u("div"),p=d(x),m(n,"class","day svelte-2xlxhx"),m(l,"class","smoked svelte-2xlxhx"),$(l,"yes",!t[5].smoked),$(l,"no",t[5].smoked),m(e,"class","data-container svelte-2xlxhx"),$(e,"new-week-space",t[5].isNewWeek)},m(t,i){a(t,e,i),c(e,n),c(n,o),c(o,r),c(e,s),c(e,l),c(l,p)},p(t,n){1&n&&g!==(g=F[t[5].date.getDay()]+"")&&h(r,g),1&n&&x!==(x=t[5].smoked?"OUI":"NON")&&h(p,x),1&n&&$(l,"yes",!t[5].smoked),1&n&&$(l,"no",t[5].smoked),1&n&&$(e,"new-week-space",t[5].isNewWeek)},d(t){t&&i(e)}}}function tt(t){let e,n,o,r,s,p,g=t[2][0].weekId+"",$=t[2],x=[];for(let e=0;e<$.length;e+=1)x[e]=Z(X(t,$,e));return{c(){e=u("h2"),n=d("Week "),o=d(g),r=f(),s=u("div");for(let t=0;t<x.length;t+=1)x[t].c();p=f(),m(e,"class","svelte-2xlxhx"),m(s,"class","week-container svelte-2xlxhx")},m(t,i){a(t,e,i),c(e,n),c(e,o),a(t,r,i),a(t,s,i);for(let t=0;t<x.length;t+=1)x[t].m(s,null);c(s,p)},p(t,e){if(1&e&&g!==(g=t[2][0].weekId+"")&&h(o,g),1&e){let n;for($=t[2],n=0;n<$.length;n+=1){const o=X(t,$,n);x[n]?x[n].p(o,e):(x[n]=Z(o),x[n].c(),x[n].m(s,p))}for(;n<x.length;n+=1)x[n].d(1);x.length=$.length}},d(t){t&&i(e),t&&i(r),t&&i(s),l(x,t)}}}function et(e){let n,o,r,s=e[0].reverse(),c=[];for(let t=0;t<s.length;t+=1)c[t]=tt(Q(e,s,t));return{c(){n=u("h1"),n.textContent="Smoked by day",o=f(),r=u("div");for(let t=0;t<c.length;t+=1)c[t].c();m(r,"class","container svelte-2xlxhx")},m(t,e){a(t,n,e),a(t,o,e),a(t,r,e);for(let t=0;t<c.length;t+=1)c[t].m(r,null)},p(t,[e]){if(1&e){let n;for(s=t[0].reverse(),n=0;n<s.length;n+=1){const o=Q(t,s,n);c[n]?c[n].p(o,e):(c[n]=tt(o),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=s.length}},i:t,o:t,d(t){t&&i(n),t&&i(o),t&&i(r),l(c,t)}}}function nt(t,e,n){let o,{data:r}=e;return t.$$set=t=>{"data"in t&&n(1,r=t.data)},t.$$.update=()=>{2&t.$$.dirty&&n(0,o=function(t){const e=Object.keys(t),n=[];return e.map((e=>{const o=new Date(e);var r=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate())),s=r.getUTCDay()||7;r.setUTCDate(r.getUTCDate()+4-s);var c=new Date(Date.UTC(r.getUTCFullYear(),0,1));const a=Math.ceil(((r-c)/864e5+1)/7);n[a]||(n[a]=[]),n[a].push({date:o,smoked:t[e],dateKey:e,weekId:a})})),n.filter((t=>Boolean(t)))}(r)),1&t.$$.dirty&&console.log(o)},[o,r]}class ot extends Y{constructor(t){super(),L(this,t,nt,et,s,{data:1})}}function rt(e){let n;return{c(){n=u("p"),n.textContent="An error was encountred."},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&i(n)}}}function st(e){let n,o;return n=new P({props:{todayId:e[2]}}),{c(){U(n.$$.fragment)},m(t,e){V(n,t,e),o=!0},p:t,i(t){o||(R(n.$$.fragment,t),o=!0)},o(t){O(n.$$.fragment,t),o=!1},d(t){j(n,t)}}}function ct(t){let e,n;return e=new ot({props:{data:t[0]}}),{c(){U(e.$$.fragment)},m(t,o){V(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.data=t[0]),e.$set(o)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function at(e){let n,o;return n=new q({}),{c(){U(n.$$.fragment)},m(t,e){V(n,t,e),o=!0},p:t,i(t){o||(R(n.$$.fragment,t),o=!0)},o(t){O(n.$$.fragment,t),o=!1},d(t){j(n,t)}}}function it(t){let e,n,o,r;const s=[at,ct,st,rt],c=[];function l(t,e){return t[1]===K.WAITING?0:t[1]===K.ANSWERED?1:t[1]===K.NEED_ANSWER?2:3}return n=l(t),o=c[n]=s[n](t),{c(){e=u("main"),o.c(),m(e,"class","svelte-dag3mx")},m(t,o){a(t,e,o),c[n].m(e,null),r=!0},p(t,[r]){let a=n;n=l(t),n===a?c[n].p(t,r):(W(),O(c[a],1,1,(()=>{c[a]=null})),M(),o=c[n],o?o.p(t,r):(o=c[n]=s[n](t),o.c()),R(o,1),o.m(e,null))},i(t){r||(R(o),r=!0)},o(t){O(o),r=!1},d(t){t&&i(e),c[n].d()}}}function lt(t,e,n){let o,r=K.WAITING;const s=(c=new Date,a=new Date(c),i=""+(a.getMonth()+1),l=""+a.getDate(),u=a.getFullYear(),i.length<2&&(i="0"+i),l.length<2&&(l="0"+l),[u,i,l].join("-"));var c,a,i,l,u;const{onValue:d}=B("/smoke-2020");return d((t=>{n(0,o=t),n(1,r=t?void 0===t[s]?K.NEED_ANSWER:K.ANSWERED:K.NEED_ANSWER)})),[o,r,s]}class ut extends Y{constructor(t){super(),L(this,t,lt,it,s,{})}}function dt(e){let n,o,r;return{c(){n=u("input"),m(n,"class","svelte-l32qy8")},m(t,s){a(t,n,s),g(n,e[0]),o||(r=p(n,"input",e[1]),o=!0)},p(t,e){1&e&&n.value!==t[0]&&g(n,t[0])},i:t,o:t,d(t){t&&i(n),o=!1,r()}}}function ft(e){let n,o;return n=new ut({}),{c(){U(n.$$.fragment)},m(t,e){V(n,t,e),o=!0},p:t,i(t){o||(R(n.$$.fragment,t),o=!0)},o(t){O(n.$$.fragment,t),o=!1},d(t){j(n,t)}}}function pt(t){let e,n,o,r;const s=[ft,dt],c=[];function l(t,e){return"smoke2020"===t[0]?0:1}return e=l(t),n=c[e]=s[e](t),{c(){n.c(),o=d("")},m(t,n){c[e].m(t,n),a(t,o,n),r=!0},p(t,[r]){let a=e;e=l(t),e===a?c[e].p(t,r):(W(),O(c[a],1,1,(()=>{c[a]=null})),M(),n=c[e],n?n.p(t,r):(n=c[e]=s[e](t),n.c()),R(n,1),n.m(o.parentNode,o))},i(t){r||(R(n),r=!0)},o(t){O(n),r=!1},d(t){c[e].d(t),t&&i(o)}}}function mt(t,e,n){let o;return console.log("app ok"),[o,function(){o=this.value,n(0,o)}]}firebase.initializeApp({apiKey:"AIzaSyA5H5YK68AEby7hDxSUK6JdgVRuAiVSReM",authDomain:"resolution2020-73610.firebaseapp.com",databaseURL:"https://resolution2020-73610-default-rtdb.firebaseio.com",projectId:"resolution2020-73610",storageBucket:"resolution2020-73610.appspot.com",messagingSenderId:"612554730358",appId:"1:612554730358:web:2042c39c452f2be009a857"});return new class extends Y{constructor(t){super(),L(this,t,mt,pt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
